<svg id="SvgjsSvg1006" width="1557" height="3165" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1092" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1093" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1321" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1322" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1325" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1326" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1329" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1330" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG1008" transform="translate(384,2295)"><path id="SvgjsPath1009" d="M 0 0L 629 0L 629 275L 0 275Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="start" font-size="13px" width="609px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1012" dy="16" x="10"><tspan id="SvgjsTspan1013" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1014" dy="16" x="10"><tspan id="SvgjsTspan1015" style="text-decoration:;">JdbcTransactionManager</tspan></tspan><tspan id="SvgjsTspan1016" dy="16" x="10"><tspan id="SvgjsTspan1017" style="text-decoration:;">@Override</tspan></tspan><tspan id="SvgjsTspan1018" dy="16" x="10"><tspan id="SvgjsTspan1019" style="text-decoration:;"> protected void doCommit(DefaultTransactionStatus status) {</tspan></tspan><tspan id="SvgjsTspan1020" dy="16" x="10"><tspan id="SvgjsTspan1021" style="text-decoration:;">  DataSourceTransactionObject txObject = (DataSourceTransactionObject) status.getTransaction();</tspan></tspan><tspan id="SvgjsTspan1022" dy="16" x="10"><tspan id="SvgjsTspan1023" style="text-decoration:;">  Connection con = txObject.getConnectionHolder().getConnection();</tspan></tspan><tspan id="SvgjsTspan1024" dy="16" x="10"><tspan id="SvgjsTspan1025" style="text-decoration:;">  if (status.isDebug()) {</tspan></tspan><tspan id="SvgjsTspan1026" dy="16" x="10"><tspan id="SvgjsTspan1027" style="text-decoration:;">   logger.debug("Committing JDBC transaction on Connection [" + con + "]");</tspan></tspan><tspan id="SvgjsTspan1028" dy="16" x="10"><tspan id="SvgjsTspan1029" style="text-decoration:;">  }</tspan></tspan><tspan id="SvgjsTspan1030" dy="16" x="10"><tspan id="SvgjsTspan1031" style="text-decoration:;">  try {</tspan></tspan><tspan id="SvgjsTspan1032" dy="16" x="10"><tspan id="SvgjsTspan1033" style="text-decoration:;">   con.</tspan><tspan id="SvgjsTspan1034" style="text-decoration:;fill: rgb(251, 192, 45);">commit()</tspan><tspan id="SvgjsTspan1035" style="text-decoration:;">;</tspan></tspan><tspan id="SvgjsTspan1036" dy="16" x="10"><tspan id="SvgjsTspan1037" style="text-decoration:;">  }</tspan></tspan><tspan id="SvgjsTspan1038" dy="16" x="10"><tspan id="SvgjsTspan1039" style="text-decoration:;">  catch (SQLException ex) {</tspan></tspan><tspan id="SvgjsTspan1040" dy="16" x="10"><tspan id="SvgjsTspan1041" style="text-decoration:;">   throw translateException("JDBC commit", ex);</tspan></tspan><tspan id="SvgjsTspan1042" dy="16" x="10"><tspan id="SvgjsTspan1043" style="text-decoration:;">  }</tspan></tspan><tspan id="SvgjsTspan1044" dy="16" x="10"><tspan id="SvgjsTspan1045" style="text-decoration:;"> }</tspan></tspan></text></g></g><g id="SvgjsG1046" transform="translate(272,2756)"><path id="SvgjsPath1047" d="M 0 0L 507 0L 507 247L 0 247Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1048"><text id="SvgjsText1049" font-family="微软雅黑" text-anchor="start" font-size="13px" width="487px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1050" dy="16" x="10"><tspan id="SvgjsTspan1051" style="text-decoration:;">DruidPooledConnection</tspan></tspan><tspan id="SvgjsTspan1052" dy="16" x="10"><tspan id="SvgjsTspan1053" style="text-decoration:;">@Override</tspan></tspan><tspan id="SvgjsTspan1054" dy="16" x="10"><tspan id="SvgjsTspan1055" style="text-decoration:;">    public void commit() throws SQLException {</tspan></tspan><tspan id="SvgjsTspan1056" dy="16" x="10"><tspan id="SvgjsTspan1057" style="text-decoration:;">        checkState();</tspan></tspan><tspan id="SvgjsTspan1058" dy="16" x="10"><tspan id="SvgjsTspan1059" style="text-decoration:;">        DruidAbstractDataSource dataSource = holder.getDataSource();</tspan></tspan><tspan id="SvgjsTspan1060" dy="16" x="10"><tspan id="SvgjsTspan1061" style="text-decoration:;">        dataSource.incrementCommitCount();</tspan></tspan><tspan id="SvgjsTspan1062" dy="16" x="10"><tspan id="SvgjsTspan1063" style="text-decoration:;">        try {</tspan></tspan><tspan id="SvgjsTspan1064" dy="16" x="10"><tspan id="SvgjsTspan1065" style="text-decoration:;">            conn.</tspan><tspan id="SvgjsTspan1066" style="text-decoration:;fill: rgb(251, 192, 45);">commit()</tspan><tspan id="SvgjsTspan1067" style="text-decoration:;">;</tspan></tspan><tspan id="SvgjsTspan1068" dy="16" x="10"><tspan id="SvgjsTspan1069" style="text-decoration:;">        } catch (SQLException ex) {</tspan></tspan><tspan id="SvgjsTspan1070" dy="16" x="10"><tspan id="SvgjsTspan1071" style="text-decoration:;">            handleException(ex, null);</tspan></tspan><tspan id="SvgjsTspan1072" dy="16" x="10"><tspan id="SvgjsTspan1073" style="text-decoration:;">        } finally {</tspan></tspan><tspan id="SvgjsTspan1074" dy="16" x="10"><tspan id="SvgjsTspan1075" style="text-decoration:;">            handleEndTransaction(dataSource, null);</tspan></tspan><tspan id="SvgjsTspan1076" dy="16" x="10"><tspan id="SvgjsTspan1077" style="text-decoration:;">        }</tspan></tspan><tspan id="SvgjsTspan1078" dy="16" x="10"><tspan id="SvgjsTspan1079" style="text-decoration:;">    }</tspan></tspan></text></g></g><g id="SvgjsG1080" transform="translate(368,3079)"><path id="SvgjsPath1081" d="M 0 0L 309 0L 309 61L 0 61Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1082"><text id="SvgjsText1083" font-family="微软雅黑" text-anchor="start" font-size="13px" width="289px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.875" transform="rotate(0)"><tspan id="SvgjsTspan1084" dy="16" x="10"><tspan id="SvgjsTspan1085" style="text-decoration:;">ConnectionImpl</tspan></tspan><tspan id="SvgjsTspan1086" dy="16" x="10"><tspan id="SvgjsTspan1087" style="text-decoration:;">public void </tspan><tspan id="SvgjsTspan1088" style="text-decoration:;fill: rgb(251, 192, 45);">commit() </tspan><tspan id="SvgjsTspan1089" style="text-decoration:;">throws SQLException {}</tspan></tspan></text></g></g><g id="SvgjsG1090"><path id="SvgjsPath1091" d="M525.5 3003L525.5 3041L522.5 3041L522.5 3079" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1092)"></path></g><g id="SvgjsG1094" transform="translate(1201,1539)"><path id="SvgjsPath1095" d="M 0 0L 331 0L 331 108L 0 108Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1096"><text id="SvgjsText1097" font-family="微软雅黑" text-anchor="start" font-size="13px" width="311px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.375" transform="rotate(0)"><tspan id="SvgjsTspan1098" dy="16" x="10"><tspan id="SvgjsTspan1099" style="text-decoration:;">@Override</tspan></tspan><tspan id="SvgjsTspan1100" dy="16" x="10"><tspan id="SvgjsTspan1101" style="text-decoration:;">    public int insert(Fruit fruit) {</tspan></tspan><tspan id="SvgjsTspan1102" dy="16" x="10"><tspan id="SvgjsTspan1103" style="text-decoration:;">        return myMapper.insert(fruit);</tspan></tspan><tspan id="SvgjsTspan1104" dy="16" x="10"><tspan id="SvgjsTspan1105" style="text-decoration:;">    }</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(56,25)"><path id="SvgjsPath1107" d="M 0 0L 394 0L 394 161L 0 161Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1108"><text id="SvgjsText1109" font-family="微软雅黑" text-anchor="start" font-size="13px" width="374px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1110" dy="16" x="10"><tspan id="SvgjsTspan1111" style="text-decoration:;">@RequestMapping("/insert")</tspan></tspan><tspan id="SvgjsTspan1112" dy="16" x="10"><tspan id="SvgjsTspan1113" style="text-decoration:;">    public int insert() {</tspan></tspan><tspan id="SvgjsTspan1114" dy="16" x="10"><tspan id="SvgjsTspan1115" style="text-decoration:;">        Fruit fruit = new Fruit();</tspan></tspan><tspan id="SvgjsTspan1116" dy="16" x="10"><tspan id="SvgjsTspan1117" style="text-decoration:;">        fruit.setId(10);</tspan></tspan><tspan id="SvgjsTspan1118" dy="16" x="10"><tspan id="SvgjsTspan1119" style="text-decoration:;">        fruit.setContent("数据添加测试");</tspan></tspan><tspan id="SvgjsTspan1120" dy="16" x="10"><tspan id="SvgjsTspan1121" style="text-decoration:;">        fruit.setName("insert test");</tspan></tspan><tspan id="SvgjsTspan1122" dy="16" x="10"><tspan id="SvgjsTspan1123" style="text-decoration:;">        fruit.setNum(new BigInteger("9999"));</tspan></tspan><tspan id="SvgjsTspan1124" dy="16" x="10"><tspan id="SvgjsTspan1125" style="text-decoration:;">        return </tspan><tspan id="SvgjsTspan1126" style="text-decoration:;fill: rgb(251, 192, 45);">myService.insert</tspan><tspan id="SvgjsTspan1127" style="text-decoration:;">(fruit);</tspan></tspan><tspan id="SvgjsTspan1128" dy="16" x="10"><tspan id="SvgjsTspan1129" style="text-decoration:;">    }</tspan></tspan></text></g></g><g id="SvgjsG1130" transform="translate(66.83333333333334,722.1904652913411)"><path id="SvgjsPath1131" d="M 0 0L 897 0L 897 395L 0 395Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1132"><text id="SvgjsText1133" font-family="微软雅黑" text-anchor="start" font-size="13px" width="877px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.125" transform="rotate(0)"><tspan id="SvgjsTspan1134" dy="16" x="10"><tspan id="SvgjsTspan1135" style="text-decoration:;">TransactionInterceptor</tspan></tspan><tspan id="SvgjsTspan1136" dy="16" x="10"><tspan id="SvgjsTspan1137" style="text-decoration:;">@Override</tspan></tspan><tspan id="SvgjsTspan1138" dy="16" x="10"><tspan id="SvgjsTspan1139" style="text-decoration:;"> @Nullable</tspan></tspan><tspan id="SvgjsTspan1140" dy="16" x="10"><tspan id="SvgjsTspan1141" style="text-decoration:;"> public Object </tspan><tspan id="SvgjsTspan1142" style="text-decoration:;fill: rgb(251, 192, 45);">invoke</tspan><tspan id="SvgjsTspan1143" style="text-decoration:;">(MethodInvocation invocation) throws Throwable {</tspan></tspan><tspan id="SvgjsTspan1144" dy="16" x="10"><tspan id="SvgjsTspan1145" style="text-decoration:;">  // Work out the target class: may be {@code null}.</tspan></tspan><tspan id="SvgjsTspan1146" dy="16" x="10"><tspan id="SvgjsTspan1147" style="text-decoration:;">  // The TransactionAttributeSource should be passed the target class</tspan></tspan><tspan id="SvgjsTspan1148" dy="16" x="10"><tspan id="SvgjsTspan1149" style="text-decoration:;">  // as well as the method, which may be from an interface.</tspan></tspan><tspan id="SvgjsTspan1150" dy="16" x="10"><tspan id="SvgjsTspan1151" style="text-decoration:;">  Class&lt;?&gt; targetClass = (invocation.getThis() != null ? AopUtils.getTargetClass(invocation.getThis()) : null);</tspan></tspan><tspan id="SvgjsTspan1152" dy="16" x="10"><tspan id="SvgjsTspan1153" style="text-decoration:;">  // Adapt to TransactionAspectSupport's invokeWithinTransaction...</tspan></tspan><tspan id="SvgjsTspan1154" dy="16" x="10"><tspan id="SvgjsTspan1155" style="text-decoration:;">  return </tspan><tspan id="SvgjsTspan1156" style="text-decoration:;fill: rgb(251, 192, 45);font-weight: bold;">invokeWithinTransaction</tspan><tspan id="SvgjsTspan1157" style="text-decoration:;">(invocation.getMethod(), targetClass, new CoroutinesInvocationCallback() {</tspan></tspan><tspan id="SvgjsTspan1158" dy="16" x="10"><tspan id="SvgjsTspan1159" style="text-decoration:;">   @Override</tspan></tspan><tspan id="SvgjsTspan1160" dy="16" x="10"><tspan id="SvgjsTspan1161" style="text-decoration:;">   @Nullable</tspan></tspan><tspan id="SvgjsTspan1162" dy="16" x="10"><tspan id="SvgjsTspan1163" style="text-decoration:;">   public Object proceedWithInvocation() throws Throwable {</tspan></tspan><tspan id="SvgjsTspan1164" dy="16" x="10"><tspan id="SvgjsTspan1165" style="text-decoration:;">    return invocation.proceed();</tspan></tspan><tspan id="SvgjsTspan1166" dy="16" x="10"><tspan id="SvgjsTspan1167" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1168" dy="16" x="10"><tspan id="SvgjsTspan1169" style="text-decoration:;">   @Override</tspan></tspan><tspan id="SvgjsTspan1170" dy="16" x="10"><tspan id="SvgjsTspan1171" style="text-decoration:;">   public Object getTarget() {</tspan></tspan><tspan id="SvgjsTspan1172" dy="16" x="10"><tspan id="SvgjsTspan1173" style="text-decoration:;">    return invocation.getThis();</tspan></tspan><tspan id="SvgjsTspan1174" dy="16" x="10"><tspan id="SvgjsTspan1175" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1176" dy="16" x="10"><tspan id="SvgjsTspan1177" style="text-decoration:;">   @Override</tspan></tspan><tspan id="SvgjsTspan1178" dy="16" x="10"><tspan id="SvgjsTspan1179" style="text-decoration:;">   public Object[] getArguments() {</tspan></tspan><tspan id="SvgjsTspan1180" dy="16" x="10"><tspan id="SvgjsTspan1181" style="text-decoration:;">    return invocation.getArguments();</tspan></tspan><tspan id="SvgjsTspan1182" dy="16" x="10"><tspan id="SvgjsTspan1183" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1184" dy="16" x="10"><tspan id="SvgjsTspan1185" style="text-decoration:;">  });</tspan></tspan><tspan id="SvgjsTspan1186" dy="16" x="10"><tspan id="SvgjsTspan1187" style="text-decoration:;"> }</tspan></tspan></text></g></g><g id="SvgjsG1188" transform="translate(206.60498046875,1153.5952326456704)"><path id="SvgjsPath1189" d="M 0 0L 727 0L 727 213L 0 213Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1190"><text id="SvgjsText1191" font-family="微软雅黑" text-anchor="start" font-size="13px" width="707px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="24.875" transform="rotate(0)"><tspan id="SvgjsTspan1192" dy="16" x="10"><tspan id="SvgjsTspan1193" style="text-decoration:;">JdbcTransactionManager</tspan></tspan><tspan id="SvgjsTspan1194" dy="16" x="10"><tspan id="SvgjsTspan1195" style="text-decoration:;">private TransactionStatus </tspan><tspan id="SvgjsTspan1196" style="text-decoration:;fill: rgb(251, 192, 45);">startTransaction</tspan><tspan id="SvgjsTspan1197" style="text-decoration:;">(TransactionDefinition definition, Object transaction,</tspan></tspan><tspan id="SvgjsTspan1198" dy="16" x="10"><tspan id="SvgjsTspan1199" style="text-decoration:;">   boolean debugEnabled, @Nullable SuspendedResourcesHolder suspendedResources) {</tspan></tspan><tspan id="SvgjsTspan1200" dy="16" x="10"><tspan id="SvgjsTspan1201" style="text-decoration:;">  boolean newSynchronization = (getTransactionSynchronization() != SYNCHRONIZATION_NEVER);</tspan></tspan><tspan id="SvgjsTspan1202" dy="16" x="10"><tspan id="SvgjsTspan1203" style="text-decoration:;">  DefaultTransactionStatus status = newTransactionStatus(</tspan></tspan><tspan id="SvgjsTspan1204" dy="16" x="10"><tspan id="SvgjsTspan1205" style="text-decoration:;">    definition, transaction, true, newSynchronization, debugEnabled, suspendedResources);</tspan></tspan><tspan id="SvgjsTspan1206" dy="16" x="10"><tspan id="SvgjsTspan1207" style="text-decoration:;">  </tspan><tspan id="SvgjsTspan1208" style="text-decoration:;fill: rgb(251, 192, 45);">doBegin</tspan><tspan id="SvgjsTspan1209" style="text-decoration:;">(transaction, definition);</tspan></tspan><tspan id="SvgjsTspan1210" dy="16" x="10"><tspan id="SvgjsTspan1211" style="text-decoration:;">  prepareSynchronization(status, definition);</tspan></tspan><tspan id="SvgjsTspan1212" dy="16" x="10"><tspan id="SvgjsTspan1213" style="text-decoration:;">  return status;</tspan></tspan><tspan id="SvgjsTspan1214" dy="16" x="10"><tspan id="SvgjsTspan1215" style="text-decoration:;"> }</tspan></tspan></text></g></g><g id="SvgjsG1216" transform="translate(100,1403)"><path id="SvgjsPath1217" d="M 0 0L 1032 0L 1032 781.9999618530273L 0 781.9999618530273Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1218"><text id="SvgjsText1219" font-family="微软雅黑" text-anchor="start" font-size="13px" width="1012px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.374980926513672" transform="rotate(0)"><tspan id="SvgjsTspan1220" dy="16" x="10"><tspan id="SvgjsTspan1221" style="text-decoration:;">JdbcTransactionManager</tspan></tspan><tspan id="SvgjsTspan1222" dy="16" x="10"><tspan id="SvgjsTspan1223" style="text-decoration:;">@Override</tspan></tspan><tspan id="SvgjsTspan1224" dy="16" x="10"><tspan id="SvgjsTspan1225" style="text-decoration:;"> protected void </tspan><tspan id="SvgjsTspan1226" style="text-decoration:;fill: rgb(251, 192, 45);">doBegin</tspan><tspan id="SvgjsTspan1227" style="text-decoration:;">(Object transaction, TransactionDefinition definition) {</tspan></tspan><tspan id="SvgjsTspan1228" dy="16" x="10"><tspan id="SvgjsTspan1229" style="text-decoration:;">  DataSourceTransactionObject txObject = (DataSourceTransactionObject) transaction;</tspan></tspan><tspan id="SvgjsTspan1230" dy="16" x="10"><tspan id="SvgjsTspan1231" style="text-decoration:;">  Connection con = null;</tspan></tspan><tspan id="SvgjsTspan1232" dy="16" x="10"><tspan id="SvgjsTspan1233" style="text-decoration:;">  try {</tspan></tspan><tspan id="SvgjsTspan1234" dy="16" x="10"><tspan id="SvgjsTspan1235" style="text-decoration:;">   if (!txObject.hasConnectionHolder() ||</tspan></tspan><tspan id="SvgjsTspan1236" dy="16" x="10"><tspan id="SvgjsTspan1237" style="text-decoration:;">     txObject.getConnectionHolder().isSynchronizedWithTransaction()) {</tspan></tspan><tspan id="SvgjsTspan1238" dy="16" x="10"><tspan id="SvgjsTspan1239" style="text-decoration:;">    Connection newCon = obtainDataSource().getConnection();</tspan></tspan><tspan id="SvgjsTspan1240" dy="16" x="10"><tspan id="SvgjsTspan1241" style="text-decoration:;">    if (logger.isDebugEnabled()) {</tspan></tspan><tspan id="SvgjsTspan1242" dy="16" x="10"><tspan id="SvgjsTspan1243" style="text-decoration:;">     logger.debug("Acquired Connection [" + newCon + "] for JDBC transaction");</tspan></tspan><tspan id="SvgjsTspan1244" dy="16" x="10"><tspan id="SvgjsTspan1245" style="text-decoration:;">    }</tspan></tspan><tspan id="SvgjsTspan1246" dy="16" x="10"><tspan id="SvgjsTspan1247" style="text-decoration:;">    txObject.setConnectionHolder(new ConnectionHolder(newCon), true);</tspan></tspan><tspan id="SvgjsTspan1248" dy="16" x="10"><tspan id="SvgjsTspan1249" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1250" dy="16" x="10"><tspan id="SvgjsTspan1251" style="text-decoration:;">   txObject.getConnectionHolder().setSynchronizedWithTransaction(true);</tspan></tspan><tspan id="SvgjsTspan1252" dy="16" x="10"><tspan id="SvgjsTspan1253" style="text-decoration:;">   con = txObject.getConnectionHolder().getConnection();</tspan></tspan><tspan id="SvgjsTspan1254" dy="16" x="10"><tspan id="SvgjsTspan1255" style="text-decoration:;">   Integer previousIsolationLevel = DataSourceUtils.prepareConnectionForTransaction(con, definition);</tspan></tspan><tspan id="SvgjsTspan1256" dy="16" x="10"><tspan id="SvgjsTspan1257" style="text-decoration:;">   txObject.setPreviousIsolationLevel(previousIsolationLevel);</tspan></tspan><tspan id="SvgjsTspan1258" dy="16" x="10"><tspan id="SvgjsTspan1259" style="text-decoration:;">   txObject.setReadOnly(definition.isReadOnly());</tspan></tspan><tspan id="SvgjsTspan1260" dy="16" x="10"><tspan id="SvgjsTspan1261" style="text-decoration:;">   // Switch to manual commit if necessary. This is very expensive in some JDBC drivers,</tspan></tspan><tspan id="SvgjsTspan1262" dy="16" x="10"><tspan id="SvgjsTspan1263" style="text-decoration:;">   // so we don't want to do it unnecessarily (for example if we've explicitly</tspan></tspan><tspan id="SvgjsTspan1264" dy="16" x="10"><tspan id="SvgjsTspan1265" style="text-decoration:;">   // configured the connection pool to set it already).</tspan></tspan><tspan id="SvgjsTspan1266" dy="16" x="10"><tspan id="SvgjsTspan1267" style="text-decoration:;">   if (con.getAutoCommit()) {</tspan></tspan><tspan id="SvgjsTspan1268" dy="16" x="10"><tspan id="SvgjsTspan1269" style="text-decoration:;">    txObject.setMustRestoreAutoCommit(true);</tspan></tspan><tspan id="SvgjsTspan1270" dy="16" x="10"><tspan id="SvgjsTspan1271" style="text-decoration:;">    if (logger.isDebugEnabled()) {</tspan></tspan><tspan id="SvgjsTspan1272" dy="16" x="10"><tspan id="SvgjsTspan1273" style="text-decoration:;">     logger.debug("Switching JDBC Connection [" + con + "] to manual commit");</tspan></tspan><tspan id="SvgjsTspan1274" dy="16" x="10"><tspan id="SvgjsTspan1275" style="text-decoration:;">    }</tspan></tspan><tspan id="SvgjsTspan1276" dy="16" x="10"><tspan id="SvgjsTspan1277" style="text-decoration:;">    </tspan><tspan id="SvgjsTspan1278" style="text-decoration:;fill: rgb(251, 192, 45);">con.setAutoCommit(false);</tspan></tspan><tspan id="SvgjsTspan1279" dy="16" x="10"><tspan id="SvgjsTspan1280" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1281" dy="16" x="10"><tspan id="SvgjsTspan1282" style="text-decoration:;">   prepareTransactionalConnection(con, definition);</tspan></tspan><tspan id="SvgjsTspan1283" dy="16" x="10"><tspan id="SvgjsTspan1284" style="text-decoration:;">   txObject.getConnectionHolder().setTransactionActive(true);</tspan></tspan><tspan id="SvgjsTspan1285" dy="16" x="10"><tspan id="SvgjsTspan1286" style="text-decoration:;">   int timeout = determineTimeout(definition);</tspan></tspan><tspan id="SvgjsTspan1287" dy="16" x="10"><tspan id="SvgjsTspan1288" style="text-decoration:;">   if (timeout != TransactionDefinition.TIMEOUT_DEFAULT) {</tspan></tspan><tspan id="SvgjsTspan1289" dy="16" x="10"><tspan id="SvgjsTspan1290" style="text-decoration:;">    txObject.getConnectionHolder().setTimeoutInSeconds(timeout);</tspan></tspan><tspan id="SvgjsTspan1291" dy="16" x="10"><tspan id="SvgjsTspan1292" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1293" dy="16" x="10"><tspan id="SvgjsTspan1294" style="text-decoration:;">   // Bind the connection holder to the thread.</tspan></tspan><tspan id="SvgjsTspan1295" dy="16" x="10"><tspan id="SvgjsTspan1296" style="text-decoration:;">   if (txObject.isNewConnectionHolder()) {</tspan></tspan><tspan id="SvgjsTspan1297" dy="16" x="10"><tspan id="SvgjsTspan1298" style="text-decoration:;">    TransactionSynchronizationManager.bindResource(obtainDataSource(), txObject.getConnectionHolder());</tspan></tspan><tspan id="SvgjsTspan1299" dy="16" x="10"><tspan id="SvgjsTspan1300" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1301" dy="16" x="10"><tspan id="SvgjsTspan1302" style="text-decoration:;">  }</tspan></tspan><tspan id="SvgjsTspan1303" dy="16" x="10"><tspan id="SvgjsTspan1304" style="text-decoration:;">  catch (Throwable ex) {</tspan></tspan><tspan id="SvgjsTspan1305" dy="16" x="10"><tspan id="SvgjsTspan1306" style="text-decoration:;">   if (txObject.isNewConnectionHolder()) {</tspan></tspan><tspan id="SvgjsTspan1307" dy="16" x="10"><tspan id="SvgjsTspan1308" style="text-decoration:;">    DataSourceUtils.releaseConnection(con, obtainDataSource());</tspan></tspan><tspan id="SvgjsTspan1309" dy="16" x="10"><tspan id="SvgjsTspan1310" style="text-decoration:;">    txObject.setConnectionHolder(null, false);</tspan></tspan><tspan id="SvgjsTspan1311" dy="16" x="10"><tspan id="SvgjsTspan1312" style="text-decoration:;">   }</tspan></tspan><tspan id="SvgjsTspan1313" dy="16" x="10"><tspan id="SvgjsTspan1314" style="text-decoration:;">   throw new CannotCreateTransactionException("Could not open JDBC Connection for transaction", ex);</tspan></tspan><tspan id="SvgjsTspan1315" dy="16" x="10"><tspan id="SvgjsTspan1316" style="text-decoration:;">  }</tspan></tspan><tspan id="SvgjsTspan1317" dy="16" x="10"><tspan id="SvgjsTspan1318" style="text-decoration:;"> }</tspan></tspan></text></g></g><g id="SvgjsG1319"><path id="SvgjsPath1320" d="M698.5 2570L698.5 2663L525.5 2663L525.5 2756" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1321)"></path></g><g id="SvgjsG1323"><path id="SvgjsPath1324" d="M616 2184.9999618530273L616 2239.9999809265137L698.5 2239.9999809265137L698.5 2295" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1325)"></path></g><g id="SvgjsG1327"><path id="SvgjsPath1328" d="M579.8962262599958 1366.5952326456704L579.8962262599958 1384.7976163228352L616 1384.7976163228352L616 1403" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1329)"></path></g><g id="SvgjsG1331" transform="translate(25.00927734375,213.5)"><path id="SvgjsPath1332" d="M 0 0L 769 0L 769 116L 0 116Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1333"><text id="SvgjsText1334" font-family="微软雅黑" text-anchor="start" font-size="13px" width="749px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="24.375" transform="rotate(0)"><tspan id="SvgjsTspan1335" dy="16" x="10"><tspan id="SvgjsTspan1336" style="text-decoration:;">intercept:665, CglibAopProxy$DynamicAdvisedInterceptor</tspan></tspan><tspan id="SvgjsTspan1337" dy="16" x="10"><tspan id="SvgjsTspan1338" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1339" dy="16" x="10"><tspan id="SvgjsTspan1340" style="text-decoration:;">retVal = (new CglibAopProxy.CglibMethodInvocation(proxy, target, method, args, targetClass, chain, </tspan></tspan><tspan id="SvgjsTspan1341" dy="16" x="10"><tspan id="SvgjsTspan1342" style="text-decoration:;">methodProxy)).</tspan><tspan id="SvgjsTspan1343" style="text-decoration:;fill: rgb(251, 192, 45);">proceed()</tspan><tspan id="SvgjsTspan1344" style="text-decoration:;">;</tspan></tspan></text></g></g><g id="SvgjsG1345" transform="translate(64,357)"><path id="SvgjsPath1346" d="M 0 0L 886 0L 886 309L 0 309Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1347"><text id="SvgjsText1348" font-family="微软雅黑" text-anchor="start" font-size="13px" width="866px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="24.875" transform="rotate(0)"><tspan id="SvgjsTspan1349" dy="16" x="10"><tspan id="SvgjsTspan1350" style="text-decoration:;">CglibMethodInvocation</tspan></tspan><tspan id="SvgjsTspan1351" dy="16" x="10"><tspan id="SvgjsTspan1352" style="text-decoration:;">@Nullable</tspan></tspan><tspan id="SvgjsTspan1353" dy="16" x="10"><tspan id="SvgjsTspan1354" style="text-decoration:;">    public Object </tspan><tspan id="SvgjsTspan1355" style="text-decoration:;fill: rgb(251, 192, 45);">proceed</tspan><tspan id="SvgjsTspan1356" style="text-decoration:;">() throws Throwable {</tspan></tspan><tspan id="SvgjsTspan1357" dy="16" x="10"><tspan id="SvgjsTspan1358" style="text-decoration:;">        if (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) {</tspan></tspan><tspan id="SvgjsTspan1359" dy="16" x="10"><tspan id="SvgjsTspan1360" style="text-decoration:;">            return this.invokeJoinpoint();</tspan></tspan><tspan id="SvgjsTspan1361" dy="16" x="10"><tspan id="SvgjsTspan1362" style="text-decoration:;">        } else {</tspan></tspan><tspan id="SvgjsTspan1363" dy="16" x="10"><tspan id="SvgjsTspan1364" style="text-decoration:;">            Object interceptorOrInterceptionAdvice = this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);</tspan></tspan><tspan id="SvgjsTspan1365" dy="16" x="10"><tspan id="SvgjsTspan1366" style="text-decoration:;">            if (interceptorOrInterceptionAdvice instanceof InterceptorAndDynamicMethodMatcher) {</tspan></tspan><tspan id="SvgjsTspan1367" dy="16" x="10"><tspan id="SvgjsTspan1368" style="text-decoration:;">                InterceptorAndDynamicMethodMatcher dm = (InterceptorAndDynamicMethodMatcher)interceptorOrInterceptionAdvice;</tspan></tspan><tspan id="SvgjsTspan1369" dy="16" x="10"><tspan id="SvgjsTspan1370" style="text-decoration:;">                Class&lt;?&gt; targetClass = this.targetClass != null ? this.targetClass : this.method.getDeclaringClass();</tspan></tspan><tspan id="SvgjsTspan1371" dy="16" x="10"><tspan id="SvgjsTspan1372" style="text-decoration:;">                return dm.methodMatcher.matches(this.method, targetClass, this.arguments) ? dm.interceptor.invoke(this) : this.proceed();</tspan></tspan><tspan id="SvgjsTspan1373" dy="16" x="10"><tspan id="SvgjsTspan1374" style="text-decoration:;">            } else {</tspan></tspan><tspan id="SvgjsTspan1375" dy="16" x="10"><tspan id="SvgjsTspan1376" style="text-decoration:;">                return </tspan><tspan id="SvgjsTspan1377" style="text-decoration:;fill: rgb(251, 192, 45);">((MethodInterceptor)interceptorOrInterceptionAdvice).invoke(this);</tspan></tspan><tspan id="SvgjsTspan1378" dy="16" x="10"><tspan id="SvgjsTspan1379" style="text-decoration:;">            }</tspan></tspan><tspan id="SvgjsTspan1380" dy="16" x="10"><tspan id="SvgjsTspan1381" style="text-decoration:;">        }</tspan></tspan><tspan id="SvgjsTspan1382" dy="16" x="10"><tspan id="SvgjsTspan1383" style="text-decoration:;">    }</tspan></tspan></text></g></g></svg>